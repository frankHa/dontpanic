#ifndef DP_SQLITE_HPP
#define DP_SQLITE_HPP
//dp includes
#include "libdontpanic/defines.hpp"
#include "persistenceengine.h"
// ---------------------------------------------------------------------------------
namespace dp
{
  // ---------------------------------------------------------------------------------
  namespace _persistence
  {
    // ---------------------------------------------------------------------------------
    class Sqlite
          : public PersistenceEngine
    {
        // ---------------------------------------------------------------------------------
        Q_OBJECT
        // ---------------------------------------------------------------------------------
      public:
        // ---------------------------------------------------------------------------------
        Sqlite ( QObject *parent = 0 );
        // ---------------------------------------------------------------------------------
      public:
        // ---------------------------------------------------------------------------------
        success open_database_connection() const;
        // ---------------------------------------------------------------------------------
        success update_database_schema_if_necessary() const;
        // ---------------------------------------------------------------------------------
      public:
        // ---------------------------------------------------------------------------------
        bool init();
        // ---------------------------------------------------------------------------------
        success persist ( WorktimePerDay const&_wt );
        // ---------------------------------------------------------------------------------
        success load ( WorktimePerDay & _wt ) const;
        // ---------------------------------------------------------------------------------
        success remove ( WorktimePerDay const& _wt );
        // ---------------------------------------------------------------------------------
        success findAll ( WorktimePerDayList &_pl ) const;
        // ---------------------------------------------------------------------------------
        success persist ( Project const&_project );
        // ---------------------------------------------------------------------------------
        success load ( Project & _project ) const;
        // ---------------------------------------------------------------------------------
        success remove ( Project const& _project );
        // ---------------------------------------------------------------------------------
        success findAll ( ProjectList &_pl ) const;
        // ---------------------------------------------------------------------------------
        success persist ( Task const&_t );
        // ---------------------------------------------------------------------------------
        success load ( Task & _t ) const;
        // ---------------------------------------------------------------------------------
        success remove ( Task const& _t );
        // ---------------------------------------------------------------------------------
        success findAll ( TaskList &_tl ) const;
        // ---------------------------------------------------------------------------------
        success persist ( ActionTemplate const&_t );
        // ---------------------------------------------------------------------------------
        success load ( ActionTemplate &_t ) const;
        // ---------------------------------------------------------------------------------
        success remove ( ActionTemplate const& _t );
        // ---------------------------------------------------------------------------------
        success findAll ( TemplateList &_tl ) const;
        // ---------------------------------------------------------------------------------
        success persist ( Action const&_a );
        // ---------------------------------------------------------------------------------
        success remove ( Action const&_a );
        // ---------------------------------------------------------------------------------
        success findAll ( ActionList &_tl, QDateTime const& from,  QDateTime const& to ) const;
        // ---------------------------------------------------------------------------------
        Action lastAction() const;
        // ---------------------------------------------------------------------------------
        bool hasActionsFor ( QDate const& date ) const;
        // ---------------------------------------------------------------------------------
        success persistCurrentHolidayRegion ( QString const& region );
        // ---------------------------------------------------------------------------------
        success removeCurrentHolidayRegion();
        // ---------------------------------------------------------------------------------
        success loadCurrentHolidayRegion ( QString & region ) const;
        // ---------------------------------------------------------------------------------
        success persist ( ReportType const&_t );
        // ---------------------------------------------------------------------------------
        success load ( ReportType & _t ) const;
        // ---------------------------------------------------------------------------------
        success remove ( ReportType const& _t );
        // ---------------------------------------------------------------------------------
        success findAll ( ReportTypeList &_tl ) const;
        // ---------------------------------------------------------------------------------
    };
    // ---------------------------------------------------------------------------------
  }//_persistance
  // ---------------------------------------------------------------------------------
}//dp
// ---------------------------------------------------------------------------------
#endif //DP_SQLITE_HPP
